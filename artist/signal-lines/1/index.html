<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="音乐聚合链接页">
  <meta name="theme-color" content="#0f0f0f">
  <!-- 导航栏图标 - 使用专辑封面 -->
  <link rel="icon" href="../../cover/Astral%20Line%205.jpg" type="image/jpeg">
  <link rel="shortcut icon" href="../../cover/Astral%20Line%205.jpg" type="image/jpeg">
  <link rel="apple-touch-icon" href="../../cover/Astral%20Line%205.jpg" type="image/jpeg">
  <!-- 根域名重定向逻辑 - 仅在访问根域名时跳转到404页面 -->
    <script>
    // 歌曲信息配置对象
    const songConfig = {
      // 基本信息
      songName: "Astral Line", // 歌曲名称
      artistName: "澪暗",      // 艺人名称
      songSlug: "1", // URL友好的标识符
      // 封面图片路径
      coverImage: "../../cover/Astral%20Line%205.jpg",
      // 各平台链接
      platformLinks: {
        qqmusic: "https://i.y.qq.com/v8/playsong.html?songid=612964086&songtype=0#webchat_redirect",   // QQ音乐链接
        spotify: "https://open.spotify.com/track/6dtTieL45tM5oKbBNv49J3?si=7bbea280cd4e447c",   // Spotify链接
        netease: "https://music.163.com/album?id=288841771&uct2=U2FsdGVkX18ZepsqcKD01Z7L/XN8924++4MqLWWLsQg=",   // 网易云音乐链接
        applemusic: "https://music.apple.com/", // Apple Music链接
        soundcloud: "https://soundcloud.com/lingan-sc/astral-line"  // SoundCloud链接
      }
    };
  </script>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 配置Tailwind自定义颜色和字体 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'netease': '#d6352f',
            'qqmusic': '#1ab6ff',
            'spotify': '#1db954',
            'applemusic': '#fc3c44',
            'soundcloud': '#ff7700',
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .gradient-fade-x {
        mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
      }
    }
  </style>
  <style>
      /* 内联关键CSS */
      body {
     font-family: 'Inter', system-ui, -apple-system, sans-serif;
     background-color: #0f0f0f;
     color: #f0f0f0;
     display: flex;
     justify-content: center;
     margin: 0;
     padding: 2vh 0;
     box-sizing: border-box;
     /* 减少重绘 */
     will-change: background;
     /* 允许所有设备滚动 */
     overflow: auto;
     height: auto;
     min-height: 100vh;
    }
    /* 使用伪元素创建专辑封面模糊背景 - 图片路径将通过JS动态设置 */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 120%;
      height: 120%;
      background-size: cover;
      background-position: center;
      /* 优化模糊效果以减少GPU负担 */
      filter: blur(30px) brightness(0.6);
      z-index: -1;
      transform: scale(1.1);
      /* 提示浏览器元素将被动画化 */
      will-change: transform;
    }
    /* 按钮简洁现代样式 */
    .platform-btn {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      /* 优化过渡效果 */
      transition: all 0.2s ease-out;
      /* 减少点击延迟 */
      -webkit-tap-highlight-color: transparent;
    }
    .platform-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.2);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    /* 图标对齐样式 */
    .platform-btn svg {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      width: 24px;
      height: 24px;
    }
    /* 封面容器样式 */
    .cover-container {
      position: relative;
      overflow: hidden;
      border-radius: 0.5rem;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5), 0 8px 10px -6px rgba(0, 0, 0, 0.3);
      /* 使用content-visibility优化渲染性能 */
      content-visibility: auto;
    }
    .cover-container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, transparent 80%, rgba(0, 0, 0, 0.5) 100%);
      z-index: 1;
      opacity: 0.6;
    }
    /* 优化图片加载 */
    #coverImage {
      image-rendering: -webkit-optimize-contrast;
      /* 加快过渡动画时间 */
      opacity: 0;
      transition: opacity 0.2s ease-in;
    }
    #coverImage.loaded {
      opacity: 1;
    }
  </style>
</head>
<body class="min-h-screen flex justify-center font-sans">
  
  <!-- 主内容卡片 -->
  <div class="relative w-full max-w-[450px] mx-auto p-4">
    <div class="bg-[#1f1e1c] rounded-3xl shadow-[0_0_20px_rgba(0,0,0,0.5)] overflow-hidden relative h-auto">
      
      <!-- 磨砂玻璃渐变背景层 - 背景将通过JS动态设置 -->
      <div class="absolute inset-x-0 top-0 h-[420px] -z-2">
        <div class="absolute inset-0 bg-cover bg-center" id="glassGradientBg"></div>
      </div>
      
      <!-- 封面背景模糊层 - 背景将通过JS动态设置 -->
      <div class="absolute top-0 left-0 w-full h-full -z-10">
        <div class="absolute inset-0 bg-cover bg-center opacity-40" id="coverBg"></div>
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-purple-900/20 to-black/40"></div>
      </div>
      
      <!-- 封面图区域 - 图片将通过JS动态设置 -->
      <div class="cover-container relative w-[75%] aspect-square mx-auto mt-10 mb-8 overflow-hidden rounded-lg shadow-lg">
        <img id="coverImage" alt="专辑封面" class="w-full h-full object-cover">
        <!-- 渐变遮罩 -->
        <div class="absolute bottom-0 left-0 w-full h-20 bg-gradient-to-t from-black/80 to-transparent"></div>
      </div>
      
      <!-- 专辑信息 - 内容将通过JS动态设置 -->
      <div class="p-14 text-center relative z-10" style="background: linear-gradient(to bottom, transparent 0%, rgba(15, 15, 15, 0.8) 30%, rgba(15, 15, 15, 1) 60%); padding-top: 0px; margin-top: -10px;">
        <h1 id="songName" class="text-3xl font-bold text-white mb-3"></h1>
        <a id="artistName" href="https://fan.lucetune.com/artist/reian/" class="text-gray-300 mb-8 underline hover:text-purple-400 transition-colors duration-200"></a>
        
        <!-- 分隔线 -->
        <div class="w-full h-px bg-gradient-to-r from-transparent via-gray-700 to-transparent mb-8 mt-6"></div>
        
        <!-- 平台按钮 -->
        <div class="space-y-5 flex flex-col items-center">
          <a id="qqmusicLink" href="#" class="platform-btn flex items-center justify-center gap-3 w-full max-w-xs py-3 px-4 rounded-xl bg-[#272624]/80 text-gray-100">
            <!-- QQ音乐图标 -->
            <svg class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="m12.8 11.84.72 1.01h-.11A5.28 5.28 0 0 0 8.6 14.1a3.88 3.88 0 0 0-1.29 2.41 3.35 3.35 0 0 0 1.76 3.37c1.06.6 2.19.73 3.37.52a5.02 5.02 0 0 0 3.13-1.81c.5-.62.79-1.32.84-2.12a3.84 3.84 0 0 0-.63-2.21c-.1-.2-.22-.38-.33-.57l-.2-.31-2.01-3.36a728.33 728.33 0 0 0-2.16-3.58l-.14-.25.09-.01.09-.01A6 6 0 0 0 13 5.93a3.46 3.46 0 0 0 2.56-3.31A10.04 10.04 0 0 1 12 22.04c-5.52 0-10-4.5-10-10.04a10.02 10.02 0 0 1 11.64-9.9 9.8 9.8 0 0 1-1.6.38A7 7 0 0 0 9.2 3.56a2.4 2.4 0 0 0-1.03 1.29.81.81 0 0 0 .12.76l1.43 1.97.32.44 2.76 3.82Z"></path>
            </svg>
            <span>QQ音乐</span>
          </a>
          
          <a id="spotifyLink" href="#" class="platform-btn flex items-center justify-center gap-3 w-full max-w-xs py-3 px-4 rounded-xl bg-[#272624]/80 text-gray-100">
            <!-- Spotify图标 -->
            <svg class="w-6 h-6 text-white" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
            <span>Spotify</span>
          </a>
          
          <a id="neteaseLink" href="#" class="platform-btn flex items-center justify-center gap-3 w-full max-w-xs py-3 px-4 rounded-xl bg-[#272624]/80 text-gray-100">
            <!-- 网易云音乐图标 -->
            <svg class="w-6 h-6 text-white" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13.046 9.388a3.919 3.919 0 0 0-.66.19c-.809.312-1.447.991-1.666 1.775a2.269 2.269 0 0 0-.074.81c.048.546.333 1.05.764 1.35a1.483 1.483 0 0 0 2.01-.286c.406-.531.355-1.183.24-1.636-.098-.387-.22-.816-.345-1.249a64.76 64.76 0 0 1-.269-.954zm-.82 10.07c-3.984 0-7.224-3.24-7.224-7.223 0-.98.226-3.02 1.884-4.822A7.188 7.188 0 0 1 9.502 5.6a.792.792 0 1 1 .587 1.472 5.619 5.619 0 0 0-2.795 2.462 5.538 5.538 0 0 0-.707 2.7 5.645 5.645 0 0 0 5.638 5.638c1.844 0 3.627-.953 4.542-2.428 1.042-1.68.772-3.931-.627-5.238a3.299 3.299 0 0 0-1.437-.777c.172.589.334 1.18.494 1.772.284 1.12.1 2.181-.519 2.989-.39.51-.956.888-1.592 1.064a3.038 3.038 0 0 1-2.58-.44 3.45 3.45 0 0 1-1.44-2.514c-.04-.467.002-.93.128-1.376.35-1.256 1.356-2.339 2.622-2.826a5.5 5.5 0 0 1 .823-.246l-.134-.505c-.37-1.371.25-2.579 1.547-3.007.329-.109.68-.145 1.025-.105.792.09 1.476.592 1.709 1.023.258.507-.096 1.153-.706 1.153a.788.788 0 0 1-.54-.213c-.088-.08-.163-.174-.259-.247a.825.825 0 0 0-.632-.166.807.807 0 0 0-.634.551c-.056.191-.031.406.02.595.07.256.159.597.217.82 1.11.098 2.162.54 2.97 1.296 1.974 1.844 2.35 4.886.892 7.233-1.197 1.93-3.509 3.177-5.889 3.177zM0 12c0 6.627 5.373 12 12 12s12-5.373 12-12S18.627 0 12 0 0 5.373 0 12Z"/></svg>
            <span>网易云音乐</span>
          </a>
          
          <a id="applemusicLink" href="#" class="platform-btn flex items-center justify-center gap-3 w-full max-w-xs py-3 px-4 rounded-xl bg-[#272624]/80 text-gray-100">
            <!-- Apple Music图标 -->
            <svg class="w-6 h-6 text-white" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M23.994 6.124a9.23 9.23 0 00-.24-2.19c-.317-1.31-1.062-2.31-2.18-3.043a5.022 5.022 0 00-1.877-.726 10.496 10.496 0 00-1.564-.15c-.04-.003-.083-.01-.124-.013H5.986c-.152.01-.303.017-.455.026-.747.043-1.49.123-2.193.4-1.336.53-2.3 1.452-2.865 2.78-.192.448-.292.925-.363 1.408-.056.392-.088.785-.1 1.18 0 .032-.007.062-.01.093v12.223c.01.14.017.283.027.424.05.815.154 1.624.497 2.373.65 1.42 1.738 2.353 3.234 2.801.42.127.856.187 1.293.228.555.053 1.11.06 1.667.06h11.03a12.5 12.5 0 001.57-.1c.822-.106 1.596-.35 2.295-.81a5.046 5.046 0 001.88-2.207c.186-.42.293-.87.37-1.324.113-.675.138-1.358.137-2.04-.002-3.8 0-7.595-.003-11.393zm-6.423 3.99v5.712c0 .417-.058.827-.244 1.206-.29.59-.76.962-1.388 1.14-.35.1-.706.157-1.07.173-.95.045-1.773-.6-1.943-1.536a1.88 1.88 0 011.038-2.022c.323-.16.67-.25 1.018-.324.378-.082.758-.153 1.134-.24.274-.063.457-.23.51-.516a.904.904 0 00.02-.193c0-1.815 0-3.63-.002-5.443a.725.725 0 00-.026-.185c-.04-.15-.15-.243-.304-.234-.16.01-.318.035-.475.066-.76.15-1.52.303-2.28.456l-2.325.47-1.374.278c-.016.003-.032.01-.048.013-.277.077-.377.203-.39.49-.002.042 0 .086 0 .13-.002 2.602 0 5.204-.003 7.805 0 .42-.047.836-.215 1.227-.278.64-.77 1.04-1.434 1.233-.35.1-.71.16-1.075.172-.96.036-1.755-.6-1.92-1.544-.14-.812.23-1.685 1.154-2.075.357-.15.73-.232 1.108-.31.287-.06.575-.116.86-.177.383-.083.583-.323.6-.714v-.15c0-2.96 0-5.922.002-8.882 0-.123.013-.25.042-.37.07-.285.273-.448.546-.518.255-.066.515-.112.774-.165.733-.15 1.466-.296 2.2-.444l2.27-.46c.67-.134 1.34-.27 2.01-.403.22-.043.442-.088.663-.106.31-.025.523.17.554.482.008.073.012.148.012.223.002 1.91.002 3.822 0 5.732z"/></svg>
            <span>Apple Music</span>
          </a>
          
          <a id="soundcloudLink" href="#" class="platform-btn flex items-center justify-center gap-3 w-full max-w-xs py-3 px-4 rounded-xl bg-[#272624]/80 text-gray-100">
            <!-- SoundCloud图标 -->
            <svg class="w-6 h-6 text-white" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M23.999 14.165c-.052 1.796-1.612 3.169-3.4 3.169h-8.18a.68.68 0 0 1-.675-.683V7.862a.747.747 0 0 1 .452-.724s.75-.513 2.333-.513a5.364 5.364 0 0 1 2.763.755 5.433 5.433 0 0 1 2.57 3.54c.282-.08.574-.121.868-.12.884 0 1.73.358 2.347.992s.948 1.49.922 2.373ZM10.721 8.421c.247 2.98.427 5.697 0 8.672a.264.264 0 0 1-.53 0c-.395-2.946-.22-5.718 0-8.672a.264.264 0 0 1 .53 0ZM9.072 9.448c.285 2.659.37 4.986-.006 7.655a.277.277 0 0 1-.55 0c-.331-2.63-.256-5.02 0-7.655a.277.277 0 0 1 .556 0Zm-1.663-.257c.27 2.726.39 5.171 0 7.904a.266.266 0 0 1-.532 0c-.38-2.69-.257-5.21 0-7.904a.266.266 0 0 1 .532 0Zm-1.647.77a26.108 26.108 0 0 1-.008 7.147.272.272 0 0 1-.542 0 27.955 27.955 0 0 1 0-7.147.275.275 0 0 1 .55 0Zm-1.67 1.769c.421 1.865.228 3.5-.029 5.388a.257.257 0 0 1-.514 0c-.21-1.858-.398-3.549 0-5.389a.272.272 0 0 1 .543 0Zm-1.655-.273c.388 1.897.26 3.508-.01 5.412-.026.28-.514.283-.54 0-.244-1.878-.347-3.54-.01-5.412a.283.283 0 0 1 .56 0Zm-1.668.911c.4 1.268.257 2.292-.026 3.572a.257.257 0 0 1-.514 0c-.241-1.262-.354-2.312-.023-3.572a.283.283 0 0 1 .563 0Z"/></svg>
            <span>SoundCloud</span>
          </a>
        </div>
      </div>
      
      <!-- 页脚 -->
      <div class="py-4 px-6">
        <div class="flex items-center justify-center gap-3">
          <div class="h-px flex-1 max-w-[80px] bg-gradient-to-r from-transparent to-gray-700"></div>
          <p class="text-xs text-gray-400">Powered by Lucetune</p>
          <div class="h-px flex-1 max-w-[80px] bg-gradient-to-l from-transparent to-gray-700"></div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 动态内容注入脚本 -->
   <script>
    // 提前预加载封面图片，不在DOMContentLoaded中等待
    const preloadCoverImage = new Image();
    // 在页面加载早期就设置src开始预加载
    preloadCoverImage.src = songConfig.coverImage;
    
    // 使用DOMContentLoaded的现代写法
    document.addEventListener('DOMContentLoaded', function() {
      // 直接使用预加载的图片，加速显示
      const imgElement = document.getElementById('coverImage');
      imgElement.src = songConfig.coverImage;
      imgElement.alt = `${songConfig.songName} - ${songConfig.artistName}`;
      
      // 如果图片已经加载完成，立即显示；否则等待加载完成
      if (preloadCoverImage.complete) {
        imgElement.classList.add('loaded');
      } else {
        preloadCoverImage.onload = function() {
          imgElement.classList.add('loaded');
        };
      }
      
      // 合并CSS设置，减少DOM操作
      const styleContent = `
        body::before {
          background-image: url('${songConfig.coverImage}');
        }
        #glassGradientBg {
          background-image: url('${songConfig.coverImage}');
          background-size: cover;
          background-position: center;
          filter: blur(25px) brightness(1); /* 降低模糊强度以提升性能 */
          opacity: 0.8;
        }
        #coverBg {
          background-image: url('${songConfig.coverImage}');
          filter: blur(15px); /* 降低模糊强度以提升性能 */
          transform: scale(1.2);
        }
      `;
      
      // 创建并添加样式
      const style = document.createElement('style');
      style.textContent = styleContent;
      document.head.appendChild(style);
      
      // 批量设置文本内容
      document.getElementById('songName').textContent = songConfig.songName;
      document.getElementById('artistName').textContent = songConfig.artistName;
      
      // 批量设置链接，减少重复代码
      const linkMap = {
        'qqmusicLink': songConfig.platformLinks.qqmusic,
        'spotifyLink': songConfig.platformLinks.spotify,
        'neteaseLink': songConfig.platformLinks.netease,
        'applemusicLink': songConfig.platformLinks.applemusic,
        'soundcloudLink': songConfig.platformLinks.soundcloud
      };
      
      // 一次性设置所有链接
      Object.entries(linkMap).forEach(([id, url]) => {
        const link = document.getElementById(id);
        link.href = url;
        link.setAttribute('target', '_blank');
        link.setAttribute('rel', 'noopener noreferrer');
      });
      
      // 设置页面标题
      document.title = `${songConfig.artistName} - ${songConfig.songName}`;
      
      // 简化设置标签页图标，直接使用封面图片作为favicon
      function setTabIcons() {
        // 先检查元素是否存在
        const favicon = document.getElementById('favicon');
        const appleTouchIcon = document.getElementById('apple-touch-icon');
        
        // 获取封面图片路径
        let iconPath = songConfig.coverImage;
        
        // 确保元素存在再设置href属性
        if (favicon) {
          favicon.href = iconPath;
        }
        if (appleTouchIcon) {
          appleTouchIcon.href = iconPath;
        }
        
        // 添加错误处理，确保图片加载成功
        const testImage = new Image();
        testImage.onerror = function() {
          console.warn('标签页图标加载失败，尝试修复路径...');
          
          // 方法1: 尝试使用相对于站点根目录的路径
          let fixedPath;
          
          // 检查路径是否已经是绝对路径或已经包含http(s)
          if (!iconPath.startsWith('http') && !iconPath.startsWith('/')) {
            // 获取当前页面路径深度
            const pathParts = window.location.pathname.split('/').filter(Boolean);
            // 计算需要的../数量
            const upLevels = pathParts.length - 1; // 减去1因为最后一个部分通常是文件名
            const upString = '../'.repeat(upLevels);
            
            // 处理不同格式的路径
            if (iconPath.startsWith('../../')) {
              // 原始逻辑处理
              fixedPath = upString + iconPath.substring(6); // 移除../../
            } else {
              // 直接使用相对路径
              fixedPath = upString + iconPath;
            }
          } else {
            fixedPath = iconPath;
          }
          
          console.log('尝试修复后的路径:', fixedPath);
          
          if (favicon) {
            favicon.href = fixedPath;
          }
          if (appleTouchIcon) {
            appleTouchIcon.href = fixedPath;
          }
          
          // 再次测试修复后的路径
          const testFixedImage = new Image();
          testFixedImage.onerror = function() {
            console.error('标签页图标修复失败，使用默认图标');
          };
          testFixedImage.src = fixedPath;
        };
        testImage.src = iconPath;
      }
      
      // 直接执行设置图标，不再使用异步函数
      setTabIcons();
    });
  </script>
</body>
</html>
